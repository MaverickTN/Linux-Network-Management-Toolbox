<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Network Management Toolbox</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <style>
        :root { --pico-font-size: 14px; --pico-grid-spacing-horizontal: 1.5rem; }
        body { padding-bottom: 5em; }
        .assignment-badge.reserved {
            background-color: #007bff;
            color: white;
            padding: 0.2em 0.5em;
            border-radius: 0.3em;
        }
        .status-dot { height: 10px; width: 10px; border-radius: 50%; display: inline-block; vertical-align: middle; margin-right: 0.5rem; }
        .online { background-color: #43a047; }
        .offline { background-color: #757575; }
        .blocked { background-color: #e53935; }
        /* Add more styles as needed */
    </style>
</head>
<body>
    <main class="container">
        <h1>Linux Network Management Toolbox</h1>

        <!-- Main Table: Active/Assigned Reservations (Reserved leases in blue) -->
        <h2>Active Assignments</h2>
        <table>
            <thead>
                <tr>
                    <th>Status</th>
                    <th>Assignment</th>
                    <th>Description/Hostname</th>
                    <th>MAC/IP</th>
                    <th style="text-align:center;">Internet</th>
                    <th style="text-align: right;">Stats & Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for device in assigned_reservations %}
                <tr>
                    <td>
                        <span class="status-dot {{ 'blocked' if device.network_access_blocked else ('online' if device.is_online else 'offline') }}"></span>
                    </td>
                    <td>
                        <span class="assignment-badge reserved">Reserved</span>
                    </td>
                    <td>
                        <strong>{{ device.description }}</strong><br>
                        <small>{{ device.hostname }}</small>
                    </td>
                    <td>
                        <small>{{ device.mac }}<br>{{ device.ip or 'N/A' }}</small>
                    </td>
                    <td style="text-align: center;">
                        <!-- Internet access info here if desired -->
                    </td>
                    <td style="text-align: right;">
                        <button class="btn-edit" onclick="editReservation('{{ device.mac }}')">Edit</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Table for Unassigned Reservations -->
        <h3>Other Reservations</h3>
        <table>
            <thead>
                <tr>
                    <th>Status</th>
                    <th>Description/Hostname</th>
                    <th>MAC/IP</th>
                    <th style="text-align: right;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for reservation in unassigned_reservations %}
                <tr>
                    <td>
                        <span class="assignment-badge reserved">Reserved</span>
                    </td>
                    <td>
                        <strong>{{ reservation.description }}</strong><br>
                        <small>{{ reservation.hostname }}</small>
                    </td>
                    <td>
                        <small>{{ reservation.mac }}<br>{{ reservation.ip or 'N/A' }}</small>
                    </td>
                    <td style="text-align: right;">
                        <button class="btn-edit" onclick="editReservation('{{ reservation.mac }}')">Edit</button>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        <!-- Add your other dashboard content below as needed -->

    </main>
    <script>
        function editReservation(mac) {
            // Replace this with your actual edit action
            window.location.href = '/edit_reservation/' + mac;
        }
    </script>
</body>
</html>
